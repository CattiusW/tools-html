<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">
<title>Tools</title>
<style>
  body {
    margin: 0;
    font-family: 'Nunito', sans-serif;
    background-color: #000;
    color: #fff;
    display: flex;
    height: 100vh;
    overflow: hidden;
    font-size: 1rem;
    line-height: 1.5;
  }

  /* Sidebar */
  #sidebar {
    width: 240px;
    background-color: #111;
    display: flex;
    flex-direction: column;
    padding: 20px;
    box-sizing: border-box;
    border-right: 1px solid #222;
  }
  #sidebar h2 {
    font-size: 1.2rem;
    margin: 0 0 15px;
    color: #ffffff;
  }
  #sidebar input[type="search"] {
    display:none;
    padding: 8px;
    margin-bottom: 15px;
    border-radius: 6px;
    border: 1px solid #222;
    background-color: #111;
    color: #fff;
    transition: border-color 0.2s;
  }
  #sidebar input[type="search"]:focus {
    outline: none;
    border-color: #ff9900;
  }
  #sidebar button {
    background: none;
    border: none;
    color: #ccc;
    padding: 10px;
    text-align: left;
    border-radius: 6px;
    margin-bottom: 6px;
    cursor: pointer;
    transition: all 0.2s;
    font-size: 0.95rem;
  }
  #sidebar button:hover {
    background-color: #222;
    color: #ff9900;
  }
  #sidebar button.active {
    background-color: #ff9900;
    color: #000;
    font-weight: bold;
  }
  #footer {
    margin-top: auto;
    padding: 15px;
    font-size: 0.85rem;
    color: #666;
    text-align: center;
  }

  /* Main content */
  #main {
    flex: 1;
    padding: 30px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: flex-start;
  }
  .tool { display: none; width: 100%; }
  .tool.active { display: block; }
  .tool h2 {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 20px;
    color: #ffffff;
  }
  .tool h3 {
    font-size: 1.2rem;
    margin: 15px 0 10px;
    color: #ffffff;
  }

  /* Typography */
  .display-large {
    font-size: 2rem;
    font-weight: bold;
    color: #fff;
  }
  .display-xlarge {
    font-size: 3rem;
    font-weight: bold;
    color: #fff;
  }

  input, textarea {

    border-radius: 8px;
    border: none;
    margin: 5px 0;
    font-family: 'Nunito', sans-serif;
    font-size: 1rem;
  }
  button {
        padding: 10px;    border-radius: 8px;
    border: none;
    margin: 5px 0;
    font-family: 'Nunito', sans-serif;
    font-size: 1rem;
    cursor: pointer;
    background-color: #222;
    color: #fff;
    border: 1px solid #333;
    transition: background-color 0.2s, color 0.2s, border-color 0.2s;
    text-align: left; /* buttons are left-aligned now */
  }
  button:hover {
    background-color: #ff9900;
    color: #000;
    border-color: #ff9900;
  }
  textarea, input {
    background: #111;
    color: #fff;
    border: 1px solid #222;
    transition: border-color 0.2s;
  }
  textarea:focus, input:focus {
    outline: none;

  }

  /* Remove ugly number spinners */
  input[type=number]::-webkit-inner-spin-button, 
  input[type=number]::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }
  input[type=number] {
    -moz-appearance: textfield;
  }

  /* Base64 two-column */
  .base64-container {
    display: flex;
    gap: 20px;
  }
  .base64-container textarea {
    flex: 1;
    height: 300px;
    border-radius: 8px;
    padding: 10px;
  }
  .base64-controls {
    margin-top: 10px;
  }
  .base64-controls span {
    margin-left: 10px;
    font-size: 0.9rem;
    color: #aaa;
  }

  /* Time display */
  #current-time-display {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 50vh;
  }
  #current-time-display #current-date { 
    margin: 0; 
    color: #aaa; 
  }

  /* Reaction box */
  #reaction.active {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    max-width: none;
    border-radius: 12px;
    cursor: pointer;
    user-select: none;
    transition: background-color 0.2s, color 0.2s;
    background-color: #000;
    color: #fff;
    font-size: 2rem;
  }

  /* Countdown */
  .countdown-inputs, .countdown-buttons {
    display:flex;
    gap:10px;
    margin:10px 0;
  }

</style>
</head>
<body>

<div id="sidebar">
  <h2>Tools</h2>
  <input type="search" placeholder="Search tools..." />
  <button class="tab-btn active" data-tool="base64">Base64 Converter</button>
  <button class="tab-btn" data-tool="reaction">Reaction Time</button>
  <button class="tab-btn" data-tool="pomodoro">Pomodoro Timer</button>
  <button class="tab-btn" data-tool="stopwatch">Stopwatch</button>
  <button class="tab-btn" data-tool="countdown">Countdown Timer</button>
  <button class="tab-btn" data-tool="random">Number Generator</button>
  <button class="tab-btn" data-tool="time">Current Time</button>
  <button class="tab-btn" data-tool="browser">Browser Info</button>
  
  <div id="footer">Made by Cassius</div>
</div>

<div id="main">

<!-- Base64 -->
<div id="base64" class="tool active">
  <h2>Base64 Converter</h2>
  <div class="base64-container">
    <div>
      <h3>Plaintext</h3>
      <textarea id="base64-input" placeholder="Plaintext"></textarea>
    </div>
    <div>
      <h3>Base64</h3>
      <textarea id="base64-output" placeholder="Base64 encoded text"></textarea>
    </div>
  </div>
  <div class="base64-controls">
    <span id="base64-stats">Plaintext Length: 0 | Base64 Length: 0 | Difference: 0</span>
  </div>
</div>

<style>
  /* Make the Base64 section fill the whole main area */
  #base64.tool.active {
    display: flex;
    flex-direction: column;
    flex: 1;
    height: 100%;
  }

  .base64-container {
    display: flex;
    gap: 20px;
    flex: 1; /* take up all available space */
    min-height: 0; /* fix flexbox overflow */
  }

  .base64-container div {
    flex: 1;
    display: flex;
    flex-direction: column;
    min-height: 0;
  }

  .base64-container textarea {
    flex: 1;
    width: 100%;
    border-radius: 8px;
    padding: 10px;
    resize: none;
    min-height: 0;
  }

  .base64-controls {
    margin-top: 10px;
  }
</style>


  <!-- Reaction -->
  <div id="reaction" class="tool">
    Click to start
  </div>

  <!-- Pomodoro -->
  <div id="pomodoro" class="tool">
    <h2>Pomodoro Timer</h2>
    <p id="pomodoro-mode" class="display-large">Mode: Work</p>
    <p id="pomodoro-display" class="display-large">25:00</p>
    <button onclick="startPomodoro()">Start</button>
    <button onclick="stopPomodoro()">Stop</button>
    <button onclick="skipPomodoro()">Skip</button>
    <button onclick="resetPomodoro()">Reset</button>
  </div>

  <!-- Stopwatch -->
  <div id="stopwatch" class="tool">
    <h2>Stopwatch</h2>
    <p id="stopwatch-display" class="display-large">00:00:00</p>
    <button onclick="startStopwatch()">Start</button>
    <button onclick="stopStopwatch()">Stop</button>
    <button onclick="resetStopwatch()">Reset</button>
  </div>

  <!-- Countdown -->
  <div id="countdown" class="tool">
    <h2>Countdown Timer</h2>
    <div class="countdown-inputs">
      <input type="number" id="countdown-hours" placeholder="Hours" min="0" style="width:60px;">
      <input type="number" id="countdown-minutes" placeholder="Minutes" min="0" max="59" style="width:60px;">
      <input type="number" id="countdown-seconds" placeholder="Seconds" min="0" max="59" style="width:60px;">
    </div>
    <p id="countdown-display" class="display-large"></p>
    <div class="countdown-buttons">
      <button onclick="startCountdown()">Start</button>
      <button onclick="stopCountdown()">Stop</button>
      <button onclick="resetCountdown()">Reset</button>
    </div>
  </div>

  <!-- Random -->
  <div id="random" class="tool">
    <h2>Number Generator</h2>
    <input type="number" id="rand-min" placeholder="Min">
    <input type="number" id="rand-max" placeholder="Max">
    <button onclick="generateRandom()">Generate</button>
    <p id="rand-result"></p>
  </div>

  <!-- Current Time -->
  <div id="time" class="tool">
    <div id="current-time-display">
      <p id="current-time" class="display-xlarge"></p>
      <p id="current-date" class="display-large"></p>
    </div>
  </div>

  <!-- Browser Info -->
  <div id="browser" class="tool">
    <h2>Browser Info</h2>
    <p id="browser-info"></p>
  </div>

</div>

<script>
  /* Navigation with reset on tab switch */
  const tabs = document.querySelectorAll('.tab-btn');
  const tools = document.querySelectorAll('.tool');
  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      // Reset all tools before switching
      resetAllTools();

      tabs.forEach(t => t.classList.remove('active'));
      tab.classList.add('active');
      tools.forEach(tool => tool.classList.remove('active'));
      document.getElementById(tab.dataset.tool).classList.add('active');
    });
  });
  const base64Input = document.getElementById('base64-input');
  const base64Output = document.getElementById('base64-output');
  const base64Stats = document.getElementById('base64-stats');
  let updating = false; // prevent infinite loop

  function updateStats() {
    const plainLen = base64Input.value.length;
    const baseLen = base64Output.value.length;
    base64Stats.textContent = `Plaintext Length: ${plainLen} | Base64 Length: ${baseLen} | Difference: ${baseLen - plainLen}`;
  }

  base64Input.addEventListener('input', () => {
    if (updating) return;
    try {
      updating = true;
      base64Output.value = btoa(base64Input.value);
    } catch {
      base64Output.value = 'Invalid input';
    } finally {
      updating = false;
      updateStats();
    }
  });

  base64Output.addEventListener('input', () => {
    if (updating) return;
    try {
      updating = true;
      base64Input.value = atob(base64Output.value);
    } catch {
      base64Input.value = 'Invalid Base64';
    } finally {
      updating = false;
      updateStats();
    }
  });

  updateStats();

  /* Reaction Time */
  const reactionBox = document.getElementById('reaction');
  let reactionStart, reactionTimeout, waiting = false;
  function resetReaction() {
    reactionBox.style.backgroundColor = '#000';
    reactionBox.style.color = '#fff';
    reactionBox.textContent = 'Click to start';
    waiting = false;
    clearTimeout(reactionTimeout);
  }
  function startReaction() {
    reactionBox.style.backgroundColor = '#000';
    reactionBox.style.color = '';
    reactionBox.textContent = 'Wait...';
    waiting = true;
    const delay = Math.random() * 3000 + 2000;
    reactionTimeout = setTimeout(() => {
      reactionBox.style.backgroundColor = '#fff';
      reactionBox.style.color = '#ff9900';
      reactionBox.textContent = 'CLICK!';
      reactionStart = Date.now();
    }, delay);
  }
  reactionBox.onclick = () => {
    if (!waiting) { startReaction(); return; }
    const bg = getComputedStyle(reactionBox).backgroundColor;
    if (bg === 'rgb(0, 0, 0)') {
      reactionBox.textContent = 'Too early! Click to try again';
      waiting = false;
      clearTimeout(reactionTimeout);
    } else if (bg === 'rgb(255, 255, 255)') {
      const reactionTime = Date.now() - reactionStart;
      reactionBox.textContent = `Reaction time: ${reactionTime} ms\n`;
      reactionBox.style.backgroundColor = '#000';
      reactionBox.style.color = '#fff';
      waiting = false;
    }
  };

  /* Pomodoro */
  let pomodoroInterval, pomodoroTime = 25*60, isWork = true;
  function updatePomodoro() {
    const min = String(Math.floor(pomodoroTime/60)).padStart(2,'0');
    const sec = String(pomodoroTime%60).padStart(2,'0');
    document.getElementById('pomodoro-display').textContent = `${min}:${sec}`;
    document.getElementById('pomodoro-mode').textContent = `Mode: ${isWork ? 'Work' : 'Break'}`;
    if(pomodoroTime > 0) pomodoroTime--;
    else switchPomodoro();
  }
  function startPomodoro() { clearInterval(pomodoroInterval); pomodoroInterval = setInterval(updatePomodoro,1000); }
  function stopPomodoro() { clearInterval(pomodoroInterval); }
  function switchPomodoro() { isWork = !isWork; pomodoroTime = isWork ? 25*60 : 5*60; updatePomodoro(); }
  function skipPomodoro() { switchPomodoro(); }
  function resetPomodoro() { clearInterval(pomodoroInterval); isWork = true; pomodoroTime = 25*60; updatePomodoro(); }

  /* Stopwatch */
  let stopwatchInterval, stopwatchTime = 0;
  function updateStopwatch() { 
    stopwatchTime++; 
    const h = String(Math.floor(stopwatchTime/3600)).padStart(2,'0'); 
    const m = String(Math.floor((stopwatchTime%3600)/60)).padStart(2,'0'); 
    const s = String(stopwatchTime%60).padStart(2,'0'); 
    document.getElementById('stopwatch-display').textContent = `${h}:${m}:${s}`; 
  }
  function startStopwatch() { clearInterval(stopwatchInterval); stopwatchInterval = setInterval(updateStopwatch,1000); }
  function stopStopwatch() { clearInterval(stopwatchInterval); }
  function resetStopwatch() { clearInterval(stopwatchInterval); stopwatchTime=-1; updateStopwatch(); }

  /* Countdown Timer */
  let countdownInterval, countdownTime = 0;
  function startCountdown() {
    const h = parseInt(document.getElementById('countdown-hours').value) || 0;
    const m = parseInt(document.getElementById('countdown-minutes').value) || 0;
    const s = parseInt(document.getElementById('countdown-seconds').value) || 0;
    countdownTime = h*3600 + m*60 + s;
    if(countdownTime <= 0) return;
    clearInterval(countdownInterval);
    updateCountdown();
    countdownInterval = setInterval(updateCountdown, 1000);
  }
  function updateCountdown() {
    if(countdownTime <= 0) { 
      clearInterval(countdownInterval); 
      document.getElementById('countdown-display').textContent = 'Time is up!'; 
      return; 
    }
    const h = String(Math.floor(countdownTime / 3600)).padStart(2,'0');
    const m = String(Math.floor((countdownTime % 3600) / 60)).padStart(2,'0');
    const s = String(countdownTime % 60).padStart(2,'0');
    document.getElementById('countdown-display').textContent = `${h}:${m}:${s}`;
    countdownTime--;
  }
  function stopCountdown() { clearInterval(countdownInterval); }
  function resetCountdown() { clearInterval(countdownInterval); countdownTime=0; document.getElementById('countdown-display').textContent='00:00:00'; document.getElementById('countdown-hours').value=''; document.getElementById('countdown-minutes').value=''; document.getElementById('countdown-seconds').value=''; }

  /* Random */
  function generateRandom() { 
    const min=parseInt(document.getElementById('rand-min').value); 
    const max=parseInt(document.getElementById('rand-max').value); 
    if(isNaN(min)||isNaN(max)||min>max){ 
      document.getElementById('rand-result').textContent='Invalid range'; 
      return; 
    } 
    document.getElementById('rand-result').textContent = 'Result: '+(Math.floor(Math.random()*(max-min+1))+min); 
  }

  /* Current Time */
  function updateTime() {
    const now = new Date();
    document.getElementById('current-time').textContent = now.toLocaleTimeString();
    document.getElementById('current-date').textContent = now.toLocaleDateString(undefined, { weekday:'long', year:'numeric', month:'long', day:'numeric' });
  }
  setInterval(updateTime,1000); updateTime();

  /* Browser Info */


    async function loadBrowserInfo() {
    const infoEl = document.getElementById('browser-info');
    infoEl.textContent = "Loading...";

    try {
        // 1️⃣ Get public IP from Ipify
        const ipRes = await fetch("https://api.ipify.org?format=json");
        const ipData = await ipRes.json();
        const ip = ipData.ip;

        // 2️⃣ Get location info from ipapi.co
        const locRes = await fetch(`https://ipapi.co/${ip}/json/`);
        const locData = await locRes.json();

        // 3️⃣ Build info object
        const info = {
        ip: ip,
        city: locData.city || 'Unknown',
        region: locData.region || 'Unknown',
        country: locData.country_name || 'Unknown',
        countryCode: locData.country || 'Unknown',
        postal: locData.postal || 'Unknown',
        org: locData.org || 'Unknown',
        timezone: locData.timezone || 'Unknown',
        userAgent: navigator.userAgent,
        windowWidth: window.innerWidth,
        windowHeight: window.innerHeight,
        windowRatio: (window.innerWidth / window.innerHeight).toFixed(2),
        screenWidth: window.screen.availWidth,
        screenHeight: window.screen.availHeight,
        screenRatio: (window.screen.availWidth / window.screen.availHeight).toFixed(2),
        colorDepth: window.screen.colorDepth,
        doNotTrack: navigator.doNotTrack === "1" ? "Enabled" : "Disabled",
        globalPrivacyControl: navigator.globalPrivacyControl,
        cookies: navigator.cookieEnabled,
        webGLEnabled: !!window.WebGLRenderingContext,
        browserLanguage: navigator.language,
        cpuThreads: navigator.hardwareConcurrency,
        };

        // 4️⃣ Render
        infoEl.innerHTML = `
        <ul style="list-style:none;">
            <li><b>IP Address:</b> ${info.ip}</li>
            <li><b>City:</b> ${info.city}</li>
            <li><b>Region:</b> ${info.region}</li>
            <li><b>Country:</b> ${info.country} (${info.countryCode})</li>
            <li><b>Postal:</b> ${info.postal}</li>
            <li><b>Organization:</b> ${info.org}</li>
            <li><b>Timezone:</b> ${info.timezone}</li>
            <li><b>User Agent:</b> ${info.userAgent}</li>
            <li><b>Window:</b> ${info.windowWidth} x ${info.windowHeight} (Ratio: ${info.windowRatio})</li>
            <li><b>Screen:</b> ${info.screenWidth} x ${info.screenHeight} (Ratio: ${info.screenRatio})</li>
            <li><b>Color Depth:</b> ${info.colorDepth}</li>
            <li><b>Do Not Track:</b> ${info.doNotTrack}</li>
            <li><b>Global Privacy Control:</b> ${info.globalPrivacyControl}</li>
            <li><b>Cookies Enabled:</b> ${info.cookies}</li>
            <li><b>WebGL Enabled:</b> ${info.webGLEnabled}</li>
            <li><b>Browser Language:</b> ${info.browserLanguage}</li>
            <li><b>CPU Threads:</b> ${info.cpuThreads}</li>
        </ul>
        
        `;
    } catch (err) {
        infoEl.textContent = "Failed to load browser info: " + err;
    }
    }

    // Load info when the Browser tab is activated
    document.querySelector('[data-tool="browser"]').addEventListener('click', loadBrowserInfo);


  /* Reset all tools function */
  function resetAllTools() {
    resetReaction();
    resetPomodoro();
    resetStopwatch();
    resetCountdown();
  }
</script>
</body>
</html>
